<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>èª²é¡Œâ‘  é€£çµ¡å¸³PoC</title>
  <style>
    body { font-family: system-ui, sans-serif; margin: 24px; }
    table { border-collapse: collapse; width: 100%; margin-top: 16px; }
    th, td { border: 1px solid #ccc; padding: 6px 8px; text-align: left; }
    .pill { display:inline-block; padding:3px 8px; border-radius:14px; background:#eee; margin-right:6px; }
    .ok { color: #2e7d32; } .ng { color:#c62828; }
  </style>
</head>
<body>
  <h1>èª²é¡Œâ‘  é€£çµ¡å¸³PoC</h1>

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul>
        {% for m in messages %}<li>{{ m }}</li>{% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  <h2>âœ æå‡ºãƒ•ã‚©ãƒ¼ãƒ ï¼ˆå‰ç™»æ ¡æ—¥ã®ã¿ï¼‰</h2>
  <form method="post" action="{{ url_for('submit_report') }}">
    <div>
      å­¦ç”Ÿåï¼š<input name="student_name" required placeholder="ä¾‹ï¼‰æœ›æœˆ å­ç¾©" />
    </div>
    <div>
      æ—¥ä»˜ï¼š<input type="date" name="date" required value="{{ expected_date }}" />
      <span class="pill">å‰ç™»æ ¡æ—¥ï¼š{{ expected_date }}</span>
    </div>
    <div>
      å†…å®¹ï¼š<br/>
      <textarea name="content" required rows="3" cols="60" placeholder="ä»Šæ—¥ã®æ§˜å­ãªã©"></textarea>
    </div>
    <button type="submit">ç™»éŒ²</button>
  </form>

  <h2>ğŸ“„ æœ€æ–°æå‡º</h2>
  <table>
    <thead>
      <tr><th>ID</th><th>å­¦ç”Ÿ</th><th>æ—¥ä»˜</th><th>å†…å®¹</th><th>æ—¢èª­</th><th>æ“ä½œ</th></tr>
    </thead>
    <tbody>
      {% for r in reports %}
      <tr>
        <td>#{{ r.id }}</td>
        <td>{{ r.student.name }}</td>
        <td>{{ r.date }}</td>
        <td>{{ r.content }}</td>
        <td>{% if r.is_checked %}<span class="ok">âœ…</span>{% else %}<span class="ng">âŒ</span>{% endif %}</td>
        <td>
          {% if not r.is_checked %}
          <form method="post" action="{{ url_for('check_report', report_id=r.id) }}">
            <button type="submit">æ—¢èª­ã«ã™ã‚‹</button>
          </form>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
